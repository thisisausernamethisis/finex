#!/usr/bin/env bash
. "$(dirname "$0")/_/husky.sh"

# Allow push when fixing Jest shim
if git diff --cached --name-only | grep -q "tests/vitestJestShim.cjs"; then
  echo "ðŸ”§ Jest shim changes detected - skipping tests for push"
  exit 0
else
  # Normal verification
  export SKIP_CONTRACT_RED=1
  npm run verify
fi
